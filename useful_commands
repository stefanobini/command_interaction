# Docker for WHOLE DEMO
sudo docker build -t eng_alfred_v0-image . --network=host 2>&1 | tee docker_log.txt #--no-cache
sudo docker run --rm --privileged --device /dev/snd --volume=/home/alfred/engAlfred_v0/ROS:/home/alfred/engAlfred_v0/ROS --network="host" --runtime nvidia -dit --name eng_alfred_v0-container eng_alfred_v0-image
sudo docker exec -it eng_alfred_v0-container /bin/bash

# In the docker - Avvio demo
cd /home/alfred/engAlfred_v0/ROS/hri_ws/
source devel/setup.bash

# Launch Demos
roslaunch speech_pkg speech_demo.launch
roslaunch gesture_pkg gesture_demo.launch
roslaunch src/launch/demo.launch

# to load pretrained model (it needs for compatibility reasons)
mkdir -p /root/.cache/torch/hub/checkpoints/
cp /home/alfred/engAlfred_v0/ROS/hri_ws/src/gesture_pkg/models/mobilenet_v3_large-8738ca79.pth /root/.cache/torch/hub/checkpoints/

# ROS framework
source /opt/ros/noetic/setup.bash  # create workspace
catkin_make                         # configure workspace

# Automatically update date
sudo date -s "$(wget -qSO- --max-redirect=0 google.com 2>&1 | grep Date: | cut -d' ' -f5-8)Z"

# Change Jetson power mode
cat /etc/nvpmodel.conf          # To See all available modes.
sudo /usr/sbin/nvpmodel -q      # To see current mode.
sudo /usr/sbin/nvpmodel -m 2    # To change power mode. The last number is the selected mode.

# Network
watch -n1 iwconfig  # Signal power
nmcli dev wifi  # List of network

# Visual Studio Code
https://code.visualstudio.com/download	# download .deb version
sudo dpkg -i code_1.68.1-1655262036_arm64.deb
sudo apt install apt-transport-https
sudo apt update
sudo apt install code

# JTop
sudo apt-get install python3-pip
sudo -H pip3 install -U jetson-stats

# GitHub
git config --global user.email "sbini@unisa.it"
git config --global user.name "stefanobini"
git config --global credential.helper store
git pull --no-edit

# To detect audio device
python3 -m pip install sounddevice
python3 -m sounddevice

# For camera info
v4l2-ctl --list-devices  # list device
v4l2-ctl --list-formats-ext # frame size, frame rate